# Markov-ization
 音乐与数学大作业之中所写的马尔科夫转移概率矩阵自动生成器



如题，支持生成1阶与2阶的转移概率矩阵。

使用方法：

1. 将乐音体系数字化后的谱子用空格分隔写在`input.txt`之中（*备注：每个音用三位数表示，百位表示时值，剩下的两位数对应乐音体系中的1-97（当然，恁要是想用0-96也无所谓，毫无影响）的数字，特别地，休止符用98表示*）

2. 运行`Markov-ize.cpp`。
3. 在`output.txt`中查看结果。



此外，还更新了`Random-Note-Generator.cpp`，可以基于生成的转移概率矩阵生成随机音乐的数字化。



为了方便测试，我在此提供了样例`input.txt`（即音乐与数学课中的《鸿雁》节选）。

***

### 原理

以一阶的为例：

首先读入乐谱的第一、二个数字化音符，记作音符对`(note_pre, note_suf)`，将该音符对出现的次数记录，并将以`note_pre`为前一个音符的音符对出现的次数记录。此后将`note_suf`赋值给`note_pre`，并读入新的`note_suf`，并同上述处理，直至读完整个乐谱。

在生成转移概率矩阵时，枚举所有出现过的`note_pre: p`，记其所有出现过的后继音符所组成的集合为`S`，对每个`S`中的`s`，即每个音符对`(p,s)`进行如下计算：


$$
\frac{Count(p,s)}{\sum_{s_i\in S}Count(p,s_i)}
$$


并记录，该值即为由`p`转移至`s`的转移概率。

二阶同理，只需将记录的音符对改为`(note_pre1, note_pre2, note_suf)`即可。